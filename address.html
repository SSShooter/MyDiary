<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>address book</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="bootstrap/bootstrap.min.css">
	<script src="lib/jquery.min.js"></script>
	<script src="bootstrap/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="icon/iconfont.css">
	<link rel="stylesheet" type="text/css" href="css/custombs.css">
	<style>
		header{
			padding-top: 22px;
			height: 88px;
			position: fixed;
			top: 0;
			left: 0;
			width: 100vw;
			color: #5A95BA;
			background-color: #fff;
		}
		header .address-book-name{
			text-align: center;
			line-height: 30px;
			font-size: 18px;
			/*平衡+号的造成的偏移*/
			padding-left: 50px;
		}
		header .search-div{
			position: absolute;
			left: 50%;
			transform: translateX(-50%);
			width: 100%;
			padding: 0 20px;
		}
		.icon-search{
			vertical-align: middle; 
			color: #fff;
			position: absolute;
			left: 25px;
			line-height: 26px;
			z-index: 10;
		}
		#search{
			border: none;
			border-radius: 10px;
			background-color: #5A95BA;
			color: #fff;
			width: 100%;
			vertical-align:middle;
			position: relative;
			line-height: 24px;
			padding-left: 28px;
			margin: 0 auto;
		}
		#add{
			float: right;
			vertical-align: middle; 
			font-size: 20px;
			margin-right: 10px; 
		}
		#main{
			padding-top: 88px;
			overflow: hidden;
			background-color: #5A95BA;
			min-height: 100vh;
		}
		#index{
			position: fixed;
			width: 22px;
			padding-left: 5px;
			height: calc(100vh - 88px);
		}
		#index .alphabet{
			height: 3.8%;
			color: #fff;
		}
		.address-list{
			width: 100vw;
			padding: 10px 30px 10px 52px;
		}
		.address-list .item{
			width: 100%;
			padding: 5px 15px;
			margin: 8px 0;
			background-color: #fff;
			border-radius: 6px;
		}
		.address-list .alphabet-item{
			text-align: center;
			color: #fff;
		}
		.address-list .item .namae{
			font-size: 2em;
		}
	</style>
</head>
<body>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="table">
		<div class="table-cell">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body clearfix">
					<!-- 清除浮动 -->
						<div class="form-group">
							<label>name</label>
							<input type="text" name="name" class="form-control">
						</div>
						<div class="form-group">
							<label>number</label>
							<input type="text" name="number" class="form-control">
						</div>
						<button type="submit" class="btn btn-default pull-right" id="submitNewFolder">Submit</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
	<div class="app">
		<header>
			<div class="address-book-name">緊急時以外かけちゃダメ<i class="iconfont icon-tianjia" id="add" data-toggle="modal" data-target="#myModal"></i></div>
			
			<div class="search-div">
				<i class="iconfont icon-search"></i>
				<input type="text" name="search" id="search" />
			</div>
		</header>
		<div id="main">
			<div id="index">
				<div class="alphabet">A</div>
				<div class="alphabet">B</div>
				<div class="alphabet">C</div>
				<div class="alphabet">D</div>
				<div class="alphabet">E</div>
				<div class="alphabet">F</div>
				<div class="alphabet">G</div>
				<div class="alphabet">H</div>
				<div class="alphabet">I</div>
				<div class="alphabet">J</div>
				<div class="alphabet">K</div>
				<div class="alphabet">L</div>
				<div class="alphabet">M</div>
				<div class="alphabet">N</div>
				<div class="alphabet">O</div>
				<div class="alphabet">P</div>
				<div class="alphabet">Q</div>
				<div class="alphabet">R</div>
				<div class="alphabet">S</div>
				<div class="alphabet">T</div>
				<div class="alphabet">U</div>
				<div class="alphabet">V</div>
				<div class="alphabet">W</div>
				<div class="alphabet">X</div>
				<div class="alphabet">Y</div>
				<div class="alphabet">Z</div>
			</div>
			<div class="address-list">
				<!-- <div class="item clearfix">
					<div class="namae">宮水　三葉</div>
					<div class="number pull-right">131 1954 5888</div>
				</div> -->
			</div>
		</div>
	</div>
	<script type="text/javascript" src="js/indexeddb.js"></script>
	<script type="text/javascript" src="lib/alloy_finger.js"></script>
	<script>
		var demodata = [
			{address_id:'1',name:'宮水　三葉',number:23332333,alphabetical_order:'M',folder:1},
			{address_id:'2',name:'立花　瀧',number:23332333,alphabetical_order:'T',folder:1},
			{address_id:'7',name:'Alice',number:23332333,alphabetical_order:'A',folder:1},
			{address_id:'8',name:'Alice',number:23332333,alphabetical_order:'A',folder:1},
			{address_id:'9',name:'Alice',number:23332333,alphabetical_order:'A',folder:1},
			{address_id:'11',name:'Alice',number:23332333,alphabetical_order:'A',folder:1},
			{address_id:'12',name:'Alice',number:23332333,alphabetical_order:'A',folder:1},
			{address_id:'13',name:'Alice',number:23332333,alphabetical_order:'A',folder:1},
			{address_id:'14',name:'Alice',number:23332333,alphabetical_order:'A',folder:1},
			{address_id:'3',name:'Alice',number:23332333,alphabetical_order:'A',folder:1},
			{address_id:'4',name:'233',number:23332333,alphabetical_order:'M',folder:99},
			{address_id:'5',name:'reimu',number:23332333,alphabetical_order:'T',folder:99},
			{address_id:'6',name:'Alice',number:23332333,alphabetical_order:'A',folder:9}
		];
		var folder = localStorage.getItem("folder");
		getAddress(folder, process);
		function process(rowdata){
	    	var data = rowdata.data;
	    	var alphabetDivision;
	    	console.log(data);
	    	var all_item = '';
	    	for(var i = 0;i<data.length;i++){
	    		alphabetDivision = data[i].alphabetical_order;
	    		if(data[i-1]){
	    			if (data[i].alphabetical_order!==data[i-1].alphabetical_order) {
		    			all_item+= '<div class="alphabet-item" id="'+ alphabetDivision.toLowerCase() +'">'+alphabetDivision+'</div>';
		    		}
	    		}else{
		    		all_item+= '<div class="alphabet-item" id="'+ alphabetDivision.toLowerCase() +'">'+alphabetDivision+'</div>';
	    		}
	    		var item = '<div class="item clearfix"><div class="namae">'+ data[i].name +'</div><div class="number pull-right">'+ data[i].number +'</div></div>';
	    		all_item+=item;
	    	}
	    	$(".address-list").append(all_item);
	    }
	    $('#search').on('input',function(e){ 
	    	var input_content = $(this).val();
		    
		});  
		var el = document.getElementById('index');
		var el_event = new AlloyFinger(el, {
		    touchMove: function (e) {
		    	e.preventDefault();//禁止滚动
		    	var Y = e.changedTouches[0].clientY - 88;
		    	var cell = $(this).height()/26;
		    	if (Y<cell) {scroll('a');}
		    	else if(Y<cell*2){scroll('b');}
		    	else if(Y<cell*3){scroll('c');}
		    	else if(Y<cell*4){scroll('d');}
		    	else if(Y<cell*5){scroll('e');}
		    	else if(Y<cell*6){scroll('f');}
		    	else if(Y<cell*7){scroll('g');}
		    	else if(Y<cell*8){scroll('h');}
		    	else if(Y<cell*9){scroll('i');}
		    	else if(Y<cell*10){scroll('j');}
		    	else if(Y<cell*11){scroll('k');}
		    	else if(Y<cell*12){scroll('l');}
		    	else if(Y<cell*13){scroll('m');}
		    	else if(Y<cell*14){scroll('n');}
		    	else if(Y<cell*15){scroll('o');}
		    	else if(Y<cell*16){scroll('p');}
		    	else if(Y<cell*17){scroll('q');}
		    	else if(Y<cell*18){scroll('r');}
		    	else if(Y<cell*19){scroll('s');}
		    	else if(Y<cell*20){scroll('t');}
		    	else if(Y<cell*21){scroll('u');}
		    	else if(Y<cell*22){scroll('v');}
		    	else if(Y<cell*23){scroll('w');}
		    	else if(Y<cell*24){scroll('x');}
		    	else if(Y<cell*25){scroll('y');}
		    	else if(Y<cell*26){scroll('z');}
		    }
		});
		function scroll(x){
			if(document.getElementById(x)){
				$("html,body").animate({scrollTop:$("#"+x).offset().top-88},10);
			}else{return;}
		}

		$('#add').click(function() {
			
		});
	</script>
</body>
</html>